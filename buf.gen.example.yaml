version: v1

managed:
  enabled: true
  go_package_prefix:
    default: go.einride.tech/protoc-gen-go-aip-dataloader/example/internal/proto/gen
    except:
      - buf.build/googleapis/googleapis

plugins:
  # Dataloaders require the stubs generated by protoc-gen-go.
  - name: go
    out: example/internal/proto/gen
    opt: module=go.einride.tech/protoc-gen-go-aip-dataloader/example/internal/proto/gen
    path: .sage/bin/protoc-gen-go

  # Dataloaders require the stubs generated by protoc-gen-go-grpc.
  - name: go-grpc
    out: example/internal/proto/gen
    opt: module=go.einride.tech/protoc-gen-go-aip-dataloader/example/internal/proto/gen
    path: .sage/bin/protoc-gen-go-grpc

  # Generate dataloaders for Batch methods.
  - name: go-aip-dataloader
    out: example/internal/proto/gen
    opt: module=go.einride.tech/protoc-gen-go-aip-dataloader/example/internal/proto/gen
    path: .sage/bin/protoc-gen-go-aip-dataloader
